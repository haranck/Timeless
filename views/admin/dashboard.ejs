
    <%- include("../../views/partials/admin/header") %>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

    <!-- Main Content -->
    <main class="main-content">
        <div class="breadcrumbs">
            Admin <span>></span> <span id="currentPage">Dashboard</span>
        </div>
    
        <!-- Summary Cards -->
        <div class="summary-cards">
            <a href="/admin/salesReport" style="text-decoration: none; color: inherit;">
            <div class="summary-card">
                <div class="summary-icon">
                    <i class="fa fa-chart-line" style="color: #000000;"></i>
                </div>
                <div class="summary-info">
                    <h3>₹<%= Math.round(dashboardData.summary.totalRevenue).toLocaleString() %></h3>
                    <p>Total Revenue</p>
                </div>
                <div class="summary-change <%= dashboardData.summary.revenueGrowth >= 0 ? 'increase' : 'decrease' %>">
                    <i class="fas fa-arrow-<%= dashboardData.summary.revenueGrowth >= 0 ? 'up' : 'down' %>"></i>
                    <span><%= Math.abs(dashboardData.summary.revenueGrowth) %>%</span>
                </div>
            </div>
            </a>
            <a href="/admin/customers" style="text-decoration: none; color: inherit;">
            <div class="summary-card">
                <div class="summary-icon">
                    <i class="fa fa-users" style="color: #000000;"></i>
                </div>
                <div class="summary-info">
                    <h3><%= dashboardData.summary.totalCustomers.toLocaleString() %></h3>
                    <p>Total Customers</p>
                </div>
                <div class="summary-change <%= dashboardData.summary.customerGrowth >= 0 ? 'increase' : 'decrease' %>">
                    <i class="fas fa-arrow-<%= dashboardData.summary.customerGrowth >= 0 ? 'up' : 'down' %>"></i>
                    <span><%= Math.abs(dashboardData.summary.customerGrowth) %>%</span>
                </div>
            </div>
            </a>
            <a href="/admin/orders" style="text-decoration: none; color: inherit;">
            <div class="summary-card">
                <div class="summary-icon">
                    <i class="fas fa-shopping-cart" style="color: #000000;"></i>
                </div>
                <div class="summary-info">
                    <h3><%= dashboardData.summary.totalOrders.toLocaleString() %></h3>
                    <p>Total Orders</p>
                </div>
                <div class="summary-change <%= dashboardData.summary.orderGrowth >= 0 ? 'increase' : 'decrease' %>">
                    <i class="fas fa-arrow-<%= dashboardData.summary.orderGrowth >= 0 ? 'up' : 'down' %>"></i>
                    <span><%= Math.abs(dashboardData.summary.orderGrowth) %>%</span>
                </div>
            </div>
            </a>
        </div>

        <div class="chart-filter-container">
            <label for="salesChartFilter" class="chart-label">Select Time Filter:</label>
            <select id="salesChartFilter" class="chart-select">
                <option value="yearly">Yearly</option>
                <option value="monthly">Monthly</option>
                <option value="weekly" selected>Weekly</option>
            </select>
        </div>
        
    
        <!-- Charts Section -->
        <div class="dashboard-grid">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Sales Revenue</h3>
                </div>
                <div class="chart-container">
                    <canvas id="salesChart"></canvas>
                </div>
            </div>
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Customer Growth</h3>
                    <!-- <div class="chart-filter">
                        <select id="customersChartFilter" class="chart-select">
                            <option value="yearly">Yearly</option>
                            <option value="monthly" >Monthly</option>
                            <option value="weekly" selected>Weekly</option>
                        </select>
                    </div> -->
                </div>
                <div class="chart-container">
                    <canvas id="customersChart"></canvas>
                </div>
            </div>
        </div>
    
        <div class="dashboard-grid">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Orders Overview</h3>
                    <!-- <div class="chart-filter"> 
                        <select id="ordersChartFilter" class="chart-select">
                            <option value="yearly">Yearly</option>
                            <option value="monthly" >Monthly</option>
                            <option value="weekly" selected>Weekly</option>
                        </select>
                    </div> -->
                </div>
                <div class="chart-container">
                    <canvas id="ordersChart"></canvas>
                </div>
            </div>
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Category Performance</h3>
                    <!-- <div class="chart-filter">
                        <select id="categoryChartFilter" class="chart-select">
                            <option value="yearly">Yearly</option>
                            <option value="monthly" >Monthly</option>
                            <option value="weekly" selected>Weekly</option>
                        </select>
                    </div> -->
                </div>
                <div class="chart-container">
                    <canvas id="categoryChart"></canvas>
                </div>
            </div>
        </div>
    
        <!-- Recent Orders -->
        <div class="card recent-orders">
            <div class="card-header">
                <div style="display: flex;justify-content: space-between;margin-bottom: 24px;">
                    <h3 class="card-title">Recent Orders</h3>
                    <a href="/admin/orders" class="view-all-btn">View All</a>
                </div>
            </div>
            <div class="table-responsive">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Order ID</th>
                            <th>Customer</th>
                            <!-- <th>Product</th> -->
                            <th>Date</th>
                            <th>Amount</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% dashboardData.recentOrders.forEach(order => { %>
                            <tr>
                                <td class="order-link">#<%= order.orderId %></td>
                                <td><%= order.customer %></td>
                                <!-- <td><img src="/uploads/product-images/<order.productImages %>" alt=""></td> -->
                                <td><%= new Date(order.date).toLocaleDateString('en-US', {
                                    month: 'short',
                                    day: 'numeric',
                                    year: 'numeric'
                                }) %></td>
                                <td class="amount">₹<%= order.amount.toLocaleString() %></td>
                                <td>
                                    <span class="status <%= order.status.toLowerCase() %>"><%= order.status %></span>
                                </td>
                            </tr>
                        <% }); %>
                    </tbody>
                </table>
            </div>
        </div>
    </main>
    
    <script>
        // Pass dashboard data to client-side JavaScript
        window.dashboardData = <%-JSON.stringify(dashboardData) %>;
        
    </script>
    
    <%- include("../../views/partials/admin/footer") %>
